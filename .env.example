# Logging Stack Docker - Environment Configuration
# Copy this file to .env and adjust values for your environment
# DO NOT commit .env to version control

# ============================================================================
# LOKI CONFIGURATION
# ============================================================================

# Loki service port (default: 3100)
LOKI_PORT=3100

# Log retention policy (days)
# Older logs are automatically deleted
LOKI_RETENTION_DAYS=90

# Path to store Loki data (volumes/loki-data)
# Should have at least 30-50GB available space
LOKI_DATA_PATH=./volumes/loki-data

# Loki log level: debug, info, warn, error
LOKI_LOG_LEVEL=info

# Maximum chunk age before flushing (default: 6h)
LOKI_MAX_CHUNK_AGE=6h

# Chunk idle period (default: 3m)
LOKI_CHUNK_IDLE_PERIOD=3m

# ============================================================================
# GRAFANA CONFIGURATION
# ============================================================================

# Grafana service port (default: 3000)
GRAFANA_PORT=3000

# Grafana admin credentials (CHANGE THESE IN PRODUCTION)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=ChangeMe123!

# Grafana root URL (for reverse proxy configuration)
# Example: https://logs.universidad.edu
GRAFANA_ROOT_URL=http://localhost:3000

# Path to store Grafana data and dashboards
GRAFANA_DATA_PATH=./volumes/grafana-data

# Enable or disable Grafana user sign up
GRAFANA_ALLOW_SIGN_UP=false

# Grafana log level: debug, info, warn, error
GRAFANA_LOG_LEVEL=info

# ============================================================================
# PROMTAIL CONFIGURATION (Optional)
# ============================================================================

# Promtail service port for metrics (default: 9080)
PROMTAIL_PORT=9080

# Syslog server port (default: 1514)
PROMTAIL_SYSLOG_PORT=1514

# Promtail log level: debug, info, warn, error
PROMTAIL_LOG_LEVEL=info

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Docker network subnet for logging stack
# Used for container-to-container communication
LOGGING_NETWORK_SUBNET=172.25.0.0/16

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Enable TLS/HTTPS (requires certificates in ./certs/)
# Set to 'true' for production
ENABLE_TLS=false

# Path to TLS certificate
TLS_CERT_PATH=./certs/server.crt

# Path to TLS private key
TLS_KEY_PATH=./certs/server.key

# IP addresses allowed to access Loki API (comma-separated)
# Leave empty to allow all
LOKI_ALLOWED_IPS=

# IP addresses allowed to access Grafana (comma-separated)
# Leave empty to allow all
GRAFANA_ALLOWED_IPS=

# ============================================================================
# BACKUP & MONITORING
# ============================================================================

# Enable automated backups
ENABLE_BACKUPS=false

# Backup schedule (cron format, e.g., 0 2 * * * for daily at 2 AM)
BACKUP_SCHEDULE=0 2 * * *

# Backup destination directory
BACKUP_PATH=/backups/logging-stack

# Enable monitoring and alerts
ENABLE_MONITORING=true

# Notification email for alerts (optional)
ALERT_EMAIL=it-admin@universidad.edu

# ============================================================================
# PERFORMANCE TUNING (Advanced)
# ============================================================================

# Loki cache freshness period
LOKI_CACHE_FRESHNESS=5m

# Grafana query timeout (seconds)
GRAFANA_QUERY_TIMEOUT=30

# Maximum number of log lines in a single query
MAX_LOG_LINES=5000

# Batch size for log processing
LOGI_BATCH_SIZE=400

# ============================================================================
# UNIVERSITY-SPECIFIC CONFIGURATION
# ============================================================================

# Institution name
INSTITUTION_NAME=Universidad de Ejemplo

# Faculty name
FACULTY_NAME=Facultad de Ingenieria

# Environment name (development, staging, production)
ENVIRONMENT=production

# Support contact email
SUPPORT_EMAIL=soporte-ti@universidad.edu

# ============================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ============================================================================
# 
# 1. SECURITY:
#    - Change GRAFANA_ADMIN_PASSWORD immediately
#    - Enable TLS (ENABLE_TLS=true) with valid certificates
#    - Configure firewall rules to restrict access
#    - Use strong passwords for all services
#
# 2. STORAGE:
#    - Ensure LOKI_DATA_PATH has sufficient space (minimum 30GB)
#    - Monitor disk usage regularly
#    - Configure automated backups
#
# 3. PERFORMANCE:
#    - Adjust LOKI_RETENTION_DAYS based on your log volume
#    - Monitor memory usage and adjust chunk sizes if needed
#    - Set appropriate GRAFANA_QUERY_TIMEOUT
#
# 4. INTEGRATION:
#    - Document LOGGING_NETWORK_SUBNET in your deployment guide
#    - Share Loki URL with teams integrating external services
#    - Provide integration examples for common platforms
#
# 5. MONITORING:
#    - Set up health checks for all services
#    - Configure automated backups
#    - Enable alerts for critical issues
#
